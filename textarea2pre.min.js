$(".textarea-wrap textarea").each(function(){$(this).addClass("code"),$('<pre draggable="true" contenteditable="false"></pre>').insertBefore($(this))}),$(".textarea-wrap textarea").promise().done(function(){$(".code").each(function(){var e=$(this).val();$(this).prev("pre").text(e).each(function(){var e=$(this).outerHeight();$(this).addClass("prettyprint"),e>120?($(this).addClass("minHeight"),$('<div class="pretoolbar"><span class="selectcode"> </span> <span class="toggleContenteditable"> </span> <span class="openPopup"> </span> <span class="pre-maxHeight-toggle"> </span></div>').insertBefore($(this))):$('<div class="pretoolbar"><span class="selectcode"> </span> <span class="toggleContenteditable"> </span> <span class="openPopup"> </span></div>').insertBefore($(this))}),$("pre").promise().done(function(){window.prettyPrint&&prettyPrint()})}),$(".pre-maxHeight-toggle").click(function(){$(this).parent(".pretoolbar").next("pre").toggleClass("maxHeight").toggleClass("minHeight")}),$(".selectcode").click(function(){var e=$(this).parent(".pretoolbar").next("pre").text(),t=$(this).parent(".pretoolbar").next("pre").height(),t=t+"px";$(this).parent(".pretoolbar").next("pre").hide().next("textarea").css("height",t).val(e).show().focus().select()}),$(".toggleContenteditable").click(function(){$(this).parent(".pretoolbar").next("pre").attr("contenteditable","true").attr("draggable","false")}),$(".openPopup").click(function(){var e=window.open("","","width=400,height=400,resizeable,scrollbars"),t=$(this).parent(".pretoolbar").next("pre").html();e.document.write(t),e.document.close()})}),$(".textarea-wrap textarea").blur(function(){var e=$(this);setTimeout(function(){e.hide().prev("pre").show()},1e3)}),$(".textarea-wrap pre").blur(function(){var e=$(this);setTimeout(function(){e.is(":focus")||e.attr("contenteditable","false").attr("draggable","true").fadeTo(100,0).delay(100).fadeTo(900,1)},1e3)});
